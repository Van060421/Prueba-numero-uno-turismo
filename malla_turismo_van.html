<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Interactiva - Turismo</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background-color: #f0fdfc; color: #1d1d1d; margin: 0; padding: 0; }
    header { background: #a7e3dc; color: #083c3a; text-align: center; padding: 1rem; font-size: 1.5rem; }
    .contenedor { display: flex; flex-direction: row; flex-wrap: nowrap; overflow-x: auto; padding: 1rem; gap: 2rem; }
    .año { min-width: 300px; flex-shrink: 0; }
    .año h2 { text-align: center; background: #b4e0f7; padding: 0.5rem; border-radius: 8px; }
    .cuatri { margin: 1rem 0; padding: 1rem; background: #e0f7f4; border-radius: 8px; }
    .cuatri h3 { margin-top: 0; }
    .materia { padding: 0.4rem 0.8rem; margin: 0.3rem 0; border-radius: 6px; background: #d0f0eb; cursor: pointer; transition: 0.2s; }
    .materia:hover { background: #b2e3da; }
    .materia.bloqueada { background: #e0f0ec88; cursor: not-allowed; color: #7a7a7a; }
    .materia.aprobada { background: #90cfbf; text-decoration: line-through; }
    .contador { margin: 1rem; font-weight: bold; text-align: center; }
    button { display: block; margin: 1rem auto; padding: 0.5rem 1rem; font-size: 1rem; background: #4bbf9c; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #3aa487; }
    @media (max-width: 768px) { .contenedor { flex-direction: column; overflow-x: visible; } }
  </style>
</head>
<body>
  <header>Malla Interactiva - Licenciatura en Turismo</header>
  <div class="contador" id="contador">Materias aprobadas: 0 | Tecnicatura: 0 | Licenciatura: 0</div>
  <button onclick="reiniciar()">Reiniciar Malla</button>
  <div class="contenedor" id="contenedor"></div>
  <script>
    const materias = {
      "Primer Año": {
        "1° Cuatrimestre": [["Introducción al Turismo", ["Introducción al Turismo 2", "Programación de Circuitos"]],
        ["Geografía turística Mundial", ["Geografía Turística Mercosur"]],
        ["Destinos y Patrimonio Turístico Mundial", ["Destinos y Patrimonio Turístico de Mercosur"]],
        ["Inglés 1", ["Inglés 2"]], ["Portugués 1", ["Portugués 2"]],
        ["Regulación Jurídica de la Actividad Turística", ["Obligaciones y contratos turísticos"]],
        ["Informática 1", ["Informática Google Eart Pro – Sistema Gis – Sistema Integrados Guiemaps"]]],
        "2° Cuatrimestre": [["Introducción al Turismo 2", ["Organización y gestión de destinos turísticos", "Elaboración y evaluación de proyectos turísticos ambientales"]],
        ["Programación de Circuitos", []],
        ["Geografía Turística Mercosur", ["Geografía turística Argentina"]],
        ["Destinos y Patrimonio Turístico de Mercosur", ["Destinos y Patrimonio Turístico de Argentina"]],
        ["Inglés 2", ["Inglés 3"]], ["Portugués 2", ["Portugués 3"]],
        ["Trabajo Social Comunitario 1", ["Trabajo Social Comunitario 2"]]]
      }
    };
    const correlativas = {};
    const estado = JSON.parse(localStorage.getItem("estadoTurismo") || "{}");
    for (const año in materias) {
      for (const cuatri in materias[año]) {
        materias[año][cuatri].forEach(([nombre, desbloquea]) => {
          if (!correlativas[nombre]) correlativas[nombre] = [];
          desbloquea.forEach(dest => {
            if (!correlativas[dest]) correlativas[dest] = [];
            correlativas[dest].push(nombre);
          });
        });
      }
    }
    function guardar() { localStorage.setItem("estadoTurismo", JSON.stringify(estado)); }
    function reiniciar() {
      if (confirm("¿Está seguro de borrar todo el proceso marcado?")) {
        localStorage.removeItem("estadoTurismo"); location.reload();
      }
    }
    function crearMalla() {
      const contenedor = document.getElementById("contenedor");
      contenedor.innerHTML = "";
      let total = 0, tecnica = 0, licencia = 0;
      for (const año in materias) {
        const divAño = document.createElement("div");
        divAño.className = "año";
        divAño.innerHTML = `<h2>${año}</h2>`;
        for (const cuatri in materias[año]) {
          const divCuatri = document.createElement("div");
          divCuatri.className = "cuatri";
          divCuatri.innerHTML = `<h3>${cuatri}</h3>`;
          materias[año][cuatri].forEach(([nombre]) => {
            const divMateria = document.createElement("div");
            divMateria.className = "materia";
            divMateria.textContent = nombre;
            const requisitos = correlativas[nombre] || [];
            const desbloqueada = requisitos.every(req => estado[req]);
            if (!desbloqueada) divMateria.classList.add("bloqueada");
            if (estado[nombre]) {
              divMateria.classList.remove("bloqueada");
              divMateria.classList.add("aprobada");
              total++;
              if (["Primer Año", "Segundo Año", "Tercer Año"].includes(año)) tecnica++;
              else licencia++;
            }
            divMateria.onclick = () => {
              if (divMateria.classList.contains("bloqueada")) return;
              estado[nombre] = !estado[nombre];
              guardar();
              crearMalla();
            };
            divCuatri.appendChild(divMateria);
          });
          divAño.appendChild(divCuatri);
        }
        contenedor.appendChild(divAño);
      }
      document.getElementById("contador").textContent =
        `Materias aprobadas: ${total} | Tecnicatura: ${tecnica} | Licenciatura: ${licencia}`;
    }
    crearMalla();
  </script>
</body>
</html>
